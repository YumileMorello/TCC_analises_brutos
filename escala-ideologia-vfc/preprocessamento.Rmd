---
title: "Preprocessamento"
output: html_notebook
---



```{r}
library(here)
library(tidyverse)
library(readxl)
```

```{r}
brutos <- 
  read_excel("Neurociencias_do_Vies_de_Falso_Consenso_1145.xlsx"
           ,sheet = "Brutos",skip = 1)
```
Remover caracteres especiais e substituir espaÃ§os por underlines.
```{r}
col_names <- names(brutos)
col_names <- 
  col_names %>% 
  str_replace_all("[^_[:^punct:]]","") %>%
  str_replace_all(" ","_") %>% 
  str_replace_all(",","") %>% 
  iconv(from = 'UTF-8', to = 'ASCII//TRANSLIT')

names(brutos) <- col_names
```

```{r}
cols_vies <- c(1,13, 142, 43, 70:225)
vies <- 
  brutos %>% 
  select(all_of(cols_vies)) %>% 
  slice(-1) %>%
  mutate(across(.fns = as.numeric),
         diff = Idade13 - Idade142) %>% 
  drop_na() %>% 
  filter(Se_alguem_foi_ou_nao_bom_em_matematica == 0
         ,abs(diff) <= 1)

```

```{r}
save(vies, file = here("data","dados_AF_preprocessados.Rdata"))
```

